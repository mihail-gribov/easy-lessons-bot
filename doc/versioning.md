# –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Easy Lessons Bot

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö
- –°–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –∏ —Ä–µ–ª–∏–∑–æ–≤
- CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Docker –æ–±—Ä–∞–∑–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤–µ—Ä—Å–∏–∏

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –°–∫—Ä–∏–ø—Ç—ã –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

- **`scripts/bump_version.py`** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏
- **`scripts/health_check.py`** - health check —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–µ—Ä—Å–∏–∏
- **`core/version_info.py`** - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ—Ä—Å–∏–∏

### 2. Git Hooks

- **`.git/hooks/pre-commit`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç patch –≤–µ—Ä—Å–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –∫–æ–¥–µ
- **`.git/hooks/commit-msg`** - —Å–æ–∑–¥–∞–µ—Ç minor/major –≤–µ—Ä—Å–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–∞

### 3. GitHub Actions

- **`.github/workflows/ci.yml`** - CI/CD —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **`.github/workflows/release.yml`** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤
- **`.github/workflows/version-bump.yml`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏

```bash
# –û–±–Ω–æ–≤–∏—Ç—å patch –≤–µ—Ä—Å–∏—é (0.1.0 -> 0.1.1)
make bump-patch

# –û–±–Ω–æ–≤–∏—Ç—å minor –≤–µ—Ä—Å–∏—é (0.1.0 -> 0.2.0)
make bump-minor

# –û–±–Ω–æ–≤–∏—Ç—å major –≤–µ—Ä—Å–∏—é (0.1.0 -> 1.0.0)
make bump-major

# –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥ –¥–ª—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
make create-tag

# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ä–µ–ª–∏–∑ (bump + tag + push)
make release
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Pre-commit hook
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç patch –≤–µ—Ä—Å–∏—é –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ:

```bash
# –û–±—ã—á–Ω—ã–π –∫–æ–º–º–∏—Ç - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç patch –≤–µ—Ä—Å–∏—é
git add .
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π"
# –í–µ—Ä—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å 0.1.0 –¥–æ 0.1.1
```

#### Commit-msg hook
–°–æ–∑–¥–∞–µ—Ç minor/major –≤–µ—Ä—Å–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–∞:

```bash
# Minor –≤–µ—Ä—Å–∏—è –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /version"
# –í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å 0.1.0 –¥–æ 0.2.0

# Major –≤–µ—Ä—Å–∏—è –¥–ª—è breaking changes
git commit -m "feat!: –∏–∑–º–µ–Ω–µ–Ω API –±–æ—Ç–∞"
# –í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å 0.1.0 –¥–æ 1.0.0
```

### CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–ª–∏–∑—ã
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä–µ–ª–∏–∑:

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥
git tag v1.0.0
git push origin v1.0.0

# GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç—ã
# 2. –°–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑
# 3. –°–æ–∑–¥–∞—Å—Ç GitHub Release
```

#### –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
–ß–µ—Ä–µ–∑ GitHub Actions –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑ –≤—Ä—É—á–Ω—É—é:

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Actions -> Release
2. –ù–∞–∂–∞—Ç—å "Run workflow"
3. –£–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.0.0)
4. Workflow —Å–æ–∑–¥–∞—Å—Ç —Ä–µ–ª–∏–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## Docker –æ–±—Ä–∞–∑—ã

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
Docker –æ–±—Ä–∞–∑—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏:

```bash
# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
make docker-build-version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
docker inspect easy-lessons-bot:0.1.0 | grep -A 10 "Labels"
```

### Health Check
–û–±—Ä–∞–∑—ã —Å–æ–¥–µ—Ä–∂–∞—Ç health check —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–µ—Ä—Å–∏–∏:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å health check
docker run --rm -e TELEGRAM_BOT_TOKEN=test -e OPENROUTER_API_KEY=test \
  easy-lessons-bot:0.1.0 python scripts/health_check.py
```

## Telegram –∫–æ–º–∞–Ω–¥—ã

### –ö–æ–º–∞–Ω–¥–∞ /version
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ—Ä—Å–∏–∏ –±–æ—Ç–∞:

```
/version
```

–û—Ç–≤–µ—Ç:
```
ü§ñ Easy Lessons Bot

üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏:
version=0.1.0, commit=d34885e, branch=main, python=3.12.11
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏ –≤ –ª–æ–≥–∞—Ö
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤ –ª–æ–≥–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏:

```
2025-09-13 18:18:04,255 INFO __main__ - Bot info: version=0.1.0, commit=d34885e, branch=main, python=3.12.11
```

### Health Check –ª–æ–≥–∏
Health check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é –∏ —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:

```
Health check passed: version=0.1.0, commit=d34885e, branch=main, python=3.12.11, Database OK
```

## –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏

### –°–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ Conventional Commits:

- `feat:` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (minor –≤–µ—Ä—Å–∏—è)
- `fix:` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ (patch –≤–µ—Ä—Å–∏—è)
- `feat!:` –∏–ª–∏ `BREAKING CHANGE:` - breaking changes (major –≤–µ—Ä—Å–∏—è)
- `docs:`, `style:`, `refactor:`, `test:`, `chore:` - patch –≤–µ—Ä—Å–∏—è

### –¢–µ–≥–∏
–¢–µ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `v{version}`:
- `v0.1.0` - patch –≤–µ—Ä—Å–∏—è
- `v0.2.0` - minor –≤–µ—Ä—Å–∏—è  
- `v1.0.0` - major –≤–µ—Ä—Å–∏—è

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å git hooks
–ï—Å–ª–∏ hooks –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la .git/hooks/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞
chmod +x .git/hooks/pre-commit
chmod +x .git/hooks/commit-msg
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–µ—Ä—Å–∏–µ–π –≤ Docker
–ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Docker –æ–±—Ä–∞–∑–µ:

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
make docker-build-version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
docker inspect easy-lessons-bot:latest | grep -A 10 "Labels"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å CI/CD
–ï—Å–ª–∏ GitHub Actions –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ workflows –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `.github/workflows/`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML —Ñ–∞–π–ª–æ–≤

